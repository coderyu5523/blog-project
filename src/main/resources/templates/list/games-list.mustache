{{>layout/header}}
<!-- 바디 start -->
<main class="main-size">
    <div class="div-container">
        <br>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div class="div-recommendation mb-20">게시글 목록</div>
            <div style="display: flex; align-items: center;">
                <a class="text-body" id="sort-latest" href="#">최신순</a>
                <span style="margin: 0 10px;">|</span>
                <a class="text-body" id="sort-oldest" href="#">오래된순</a>
            </div>
        </div>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>번호</th>
                <th>사진</th>
                <th>제목</th>
                <th>글쓴이</th>
                <th>작성일</th>
            </tr>
            </thead>
            <tbody>
            {{#GameListDTO}}
                <tr>
                    <td>{{id}}</td>
                    {{#boardImg}}
                        <td><img src="/upload/{{boardImg}}" alt="사진" width="50" height="50"></td>
                    {{/boardImg}}
                    {{^boardImg}}
                        <td><img src="/upload/no-image.jpg" alt="사진" width="50" height="50"></td>
                    {{/boardImg}}
                    <td><a href="/boards/{{id}}" class="text-body">{{title}}</a></td>
                    <td><a href="/boards/{{id}}" class="text-body">{{username}}</a></td>
                    <td>{{createdAt}}</td>
                </tr>
            {{/GameListDTO}}
            </tbody>
        </table>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div class="col-md-4">
                <form action="/boards/games" method="get" class="form-inline">
                    <div class="input-group rounded box-tf">
                        <input class="form-control me-2 rounded-end tf-search" type="text" placeholder="   키워드를 입력하세요"
                               name="keyword" required/>
                        <a href="#" class="text-body"><i class="fa-solid fa-magnifying-glass icon-search"></i></a>
                    </div>
                </form>
            </div>
            <form action="/boards/save-form" method="get">
                <button class="btn btn-outline-primary">+작성</button>
            </form>
        </div>
    </div>
    <div class="d-flex justify-content-center">
        <ul class="pagination">
            <li class="page-item disabled">
                <a class="page-link" href="?page=">Previous</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page=">1</a>
            </li>
            <li class="page-item disabled">
                <a class="page-link" href="?page=">Next</a>
            </li>
        </ul>
    </div>
</main>
<!-- 바디 end -->
{{>layout/footer}}

<script>
    document.addEventListener('DOMContentLoaded', function () {

        function updateSortLink(sortOrder) {
            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set('sort', sortOrder);
            window.location.search = urlParams.toString();
        }

        const sortLatest = document.getElementById('sort-latest');
        const sortOldest = document.getElementById('sort-oldest');

        sortLatest.addEventListener('click', function (e) {
            e.preventDefault();
            updateSortLink('0');
        });

        sortOldest.addEventListener('click', function (e) {
            e.preventDefault();
            updateSortLink('1');
        });

        // 현재 URL의 쿼리 파라미터에서 sort 값 가져오기
        const currentUrlParams = new URLSearchParams(window.location.search);
        const currentSort = currentUrlParams.get('sort');

        // // 현재 정렬 상태에 따라 버튼 스타일 변경
        // if (currentSort === '0') {
        //     sortLatest.style.fontWeight = 'bold';
        //     sortLatest.style.color = 'blue';
        //     sortOldest.style.fontWeight = 'normal';
        //     sortOldest.style.color = 'black';
        // } else if (currentSort === '1') {
        //     sortLatest.style.fontWeight = 'normal';
        //     sortLatest.style.color = 'black';
        //     sortOldest.style.fontWeight = 'bold';
        //     sortOldest.style.color = 'blue';
        // }
    });
</script>
